(this["webpackJsonpboxed-in"]=this["webpackJsonpboxed-in"]||[]).push([[0],{103:function(e,t,a){e.exports=a(120)},108:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){},118:function(e,t,a){},120:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(14),s=a.n(i),c=(a(108),a(27)),o=a(54),l=a(6),u=(a(109),a(8)),h=a(9),d=a(17),p=a(16),f=a(49),m=a.n(f),v=(a(110),a(50)),g=["SENT","TRASH","SPAM","DRAFT"],b=["category:social","category:promotions","category:updates","category:forums","category:reservations","category:purchases"],w=["STARRED","UNREAD","IMPORTANT"].concat(g),y={labels:{},bundleLabels:{},sortLabel:{}},O="settings",E="ALL-LABELS",j="LABELS",k="THREADS",S="ATTACHMENTS",x=a(7),C=a.n(x),I=a(20),R=function(){function e(t){Object(u.a)(this,e),this.cacheInit=void 0,this.cache=null,this.cacheInit=this.initCache(t)}return Object(h.a)(e,[{key:"initCache",value:function(){var e=Object(I.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,caches.open(t);case 2:return this.cache=e.sent,e.abrupt("return",this.cache);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fromNetwork",value:function(){var e=Object(I.a)(C.a.mark((function e(t,a){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,t;case 3:return r=e.sent,null===(n=this.cache)||void 0===n||n.put(new Request(a),new Response(JSON.stringify(r))),e.abrupt("return",r);case 6:throw new Error("no request given");case 7:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"fromCache",value:function(){var e=Object(I.a)(C.a.mark((function e(t){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(a=this.cache)||void 0===a?void 0:a.match(new Request(t));case 2:if(!(n=e.sent)){e.next=7;break}return e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:throw new Error("not found in cache");case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(I.a)(C.a.mark((function e(t){var a,n=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.length>1&&void 0!==n[1]?n[1]:void 0,this.cache){e.next=4;break}return e.next=4,this.cacheInit;case 4:return e.prev=4,e.next=7,this.fromCache(t);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(4),e.prev=12,e.next=15,this.fromNetwork(a,t);case 15:return e.abrupt("return",e.sent);case 18:return e.prev=18,e.t1=e.catch(12),e.abrupt("return",null);case 21:case"end":return e.stop()}}),e,this,[[4,10],[12,18]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),T=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"get",value:function(){var e=Object(I.a)(C.a.mark((function e(t){var a,n=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.length>1&&void 0!==n[1]?n[1]:void 0,this.cache){e.next=4;break}return e.next=4,this.cacheInit;case 4:return e.prev=4,e.next=7,this.fromNetwork(a,t);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(4),e.prev=12,e.next=15,this.fromCache(t);case 15:return e.abrupt("return",e.sent);case 18:return e.prev=18,e.t1=e.catch(12),e.abrupt("return",null);case 21:case"end":return e.stop()}}),e,this,[[4,10],[12,18]])})));return function(t){return e.apply(this,arguments)}}()}]),a}(R),A=a(77),N=a.n(A),L=a(172),M=a(173),D=a(4),X=a(153),B={CATEGORY_UPDATES:"Benachrichtigungen","category:updates":"Benachrichtigungen",CATEGORY_PERSONAL:"Pers\xf6nlich","category:personal":"Pers\xf6nlich",CATEGORY_SOCIAL:"Soziale Medien","category:social":"Soziale Medien",CATEGORY_FORUMS:"Foren","category:forums":"Foren",CATEGORY_PROMOTIONS:"Werbung","category:promotions":"Werbung","category:reservations":"Reisen","category:purchases":"K\xe4ufe",INBOX:"Posteingang",DRAFT:"Entw\xfcrfe",CHAT:"Chats",IMPORTANT:"Wichtig"};function P(e){return B[e]?B[e]:e}function z(e,t,a){var n={};return e.reduce((function(e,n){return e[t(n)]=a(n),e}),n),n}var U=a(64),F=["https://www.googleapis.com/discovery/v1/apis/gmail/v1/rest"],W=U.web.client_id,H=U.web.api_key,_=new(function(){function e(){Object(u.a)(this,e),this.labelCache=new T(j),this.labelCacheCF=new R(j),this.threadCache=new T(k),this.gmailApi=null,this.gapi=void 0,this.isSignedIn=!1,this.signInStatusHandlers=[]}return Object(h.a)(e,[{key:"init",value:function(){var e=this;this.gapi=window.gapi,this.gapi.load("client:auth2",(function(){e.gapi.client.init({apiKey:H,clientId:W,discoveryDocs:F,scope:"https://www.googleapis.com/auth/gmail.modify"}).then((function(){e.gmailApi=window.gapi.client.gmail.users,e.gapi.auth2.getAuthInstance().isSignedIn.listen(e.updateSignInStatus.bind(e)),e.updateSignInStatus(e.gapi.auth2.getAuthInstance().isSignedIn.get())}),(function(e){console.log("Error: "+e)}))})),this.authorize.bind(this)}},{key:"onSignInStatusChanged",value:function(e){this.signInStatusHandlers.push(e),e(this.isSignedIn)}},{key:"updateSignInStatus",value:function(e){this.isSignedIn=e,this.signInStatusHandlers.forEach((function(t){return t(e)}))}},{key:"getCurrentUserProfile",value:function(){return this.gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile()}},{key:"getLabels",value:function(){var e=Object(I.a)(C.a.mark((function e(t,a,n){var r,i,s,c,o,l=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=10;break}return r=window.gapi.client.newBatch(),t.forEach((function(e){var t;r.add(null===(t=l.gmailApi)||void 0===t?void 0:t.labels.get({id:e,userId:"me"}))})),i=n?this.labelCacheCF:this.labelCache,e.next=6,i.get(a,r);case 6:return s=e.sent,c=Object.values(s.result).map((function(e){return e.result})),o=c.filter((function(e){return e.threadsTotal>0})).sort((function(e,t){return e.name.localeCompare(t.name)})),e.abrupt("return",o);case 10:return e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"listAllLabels",value:function(){var e=Object(I.a)(C.a.mark((function e(){var t,a=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(t=this.gmailApi)||void 0===t?void 0:t.labels.list({userId:"me"}).then((function(e){var t=e.result.labels.filter((function(e){return!w.includes(e.id)})).map((function(e){return e.id}));return a.getLabels(t,E)})));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getThread",value:function(){var e=Object(I.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.threadCache.get(t,null===(a=this.gmailApi)||void 0===a?void 0:a.threads.get({userId:"me",id:t})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"listThreads",value:function(){var e=Object(I.a)(C.a.mark((function e(t,a){var n,r,i=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:["INBOX"],e.abrupt("return",this.threadCache.get(t,null===(n=this.gmailApi)||void 0===n?void 0:n.threads.list({userId:"me",q:a,labelIds:r})).then((function(e){return e.result.resultSizeEstimate>0&&(e.result.threads=e.result.threads.sort((function(e,t){return t.historyId-e.historyId}))),e.result})));case 2:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"archiveMessage",value:function(){var e=Object(I.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(a=this.gmailApi)||void 0===a?void 0:a.messages.modify({userId:"me",id:t,removeLabelIds:["INBOX"]}).then((function(e){return e.result})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"archiveThread",value:function(){var e=Object(I.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(a=this.gmailApi)||void 0===a?void 0:a.threads.modify({userId:"me",id:t,removeLabelIds:["INBOX"]}).then((function(e){return e.result})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"archiveThreads",value:function(){var e=Object(I.a)(C.a.mark((function e(t){var a,n,r=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.gapi.client.newBatch(),t.forEach((function(e){var t;a.add(null===(t=r.gmailApi)||void 0===t?void 0:t.threads.modify({userId:"me",id:e,removeLabelIds:["INBOX"]}))})),e.next=4,a;case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"authorize",value:function(){this.gapi.auth2.getAuthInstance().signIn()}},{key:"signOut",value:function(){this.gapi.auth2.getAuthInstance().signOut()}}]),e}()),G=a(81),q=a.n(G),Y=a(41),J=a.n(Y),$=a(82),K=a.n($),Q=a(171),Z=a(3),V=Object(L.a)({root:{position:"relative"},revealContent:{position:"absolute",top:0,bottom:0,zIndex:0,width:0,overflow:"hidden"},left:{left:0},right:{right:0},swipeCanceled:{transform:"translateX(0) !important",transition:"transform 0.5s"},swipeRight:{transform:"translateX(100%) !important",transition:"width 0.5s"},swipeLeft:{transform:"translateX(-100%) !important",width:"100% !important",transition:"transform 0.5s, width 0.5s"},grow:{width:"100% !important",transition:"width 0.5s"},shrink:{width:"0% !important",transition:"width 0.5s"}}),ee=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).touchStartX=0,n.latestDeltaX=0,n.leftRef=void 0,n.rightRef=void 0,n.swipeRef=void 0,n.isSwipeLeft=void 0,n.isSwipeRight=void 0,n.state={cancelSwipe:!1,swipedLeft:!1,swipingLeft:!1,swipedRight:!1,swipingRight:!1},n.leftRef=r.a.createRef(),n.rightRef=r.a.createRef(),n.swipeRef=r.a.createRef(),n.isSwipeLeft=!!n.props.swipeLeft,n.isSwipeRight=!!n.props.swipeRight,n}return Object(h.a)(a,[{key:"touchStart",value:function(e){e.stopPropagation(),this.touchStartX=e.touches[0].clientX,console.log(e.currentTarget)}},{key:"touchMove",value:function(e){if(e.stopPropagation(),this.isSwipeLeft||this.isSwipeRight){var t=e.touches[0].clientX-this.touchStartX;this.latestDeltaX=t,this.setState({swipingRight:this.isSwipeRight&&t>0,swipingLeft:this.isSwipeLeft&&t<0}),this.isSwipeRight&&t>10&&this.leftRef.current&&(this.swipeRef.current&&(this.swipeRef.current.style.transform="translateX(".concat(t,"px)")),this.leftRef.current.style.width="".concat(t,"px")),this.isSwipeLeft&&t<-10&&this.rightRef.current&&(this.swipeRef.current&&(this.swipeRef.current.style.transform="translateX(".concat(t,"px)")),this.rightRef.current.style.width="".concat(-t,"px"))}}},{key:"touchEnd",value:function(e){var t,a=this;e.stopPropagation();var n,r=.5*e.currentTarget.clientWidth,i=null===(t=this.swipeRef.current)||void 0===t?void 0:t.style;if(this.isSwipeLeft&&this.latestDeltaX<0&&-this.latestDeltaX>r)this.setState({swipedLeft:!0},null===(n=this.props.swipeLeft)||void 0===n?void 0:n.action);else if(this.isSwipeRight&&this.latestDeltaX>0&&this.latestDeltaX>r){var s;this.setState({swipedRight:!0},null===(s=this.props.swipeRight)||void 0===s?void 0:s.action)}else this.setState({cancelSwipe:!0,swipingRight:!1,swipingLeft:!1}),setTimeout((function(){i&&(i.transform="translateX(0px)"),a.setState({cancelSwipe:!1})}),800)}},{key:"render",value:function(){var e,t,a,n,i,s=this.props.classes;return r.a.createElement("div",{className:s.root},this.state.swipingRight||this.state.cancelSwipe?r.a.createElement("div",{className:Object(Z.a)(s.revealContent,s.left,(e={},Object(l.a)(e,s.grow,this.state.swipedRight),Object(l.a)(e,s.shrink,this.state.cancelSwipe),e)),ref:this.leftRef},null===(t=this.props.swipeRight)||void 0===t?void 0:t.content):r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:Object(Z.a)((a={},Object(l.a)(a,s.swipeCanceled,this.state.cancelSwipe),Object(l.a)(a,s.swipeLeft,this.state.swipedLeft),Object(l.a)(a,s.swipeRight,this.state.swipedRight),a)),ref:this.swipeRef,onTouchStart:this.touchStart.bind(this),onTouchMove:this.touchMove.bind(this),onTouchEnd:this.touchEnd.bind(this)},this.props.children),this.state.swipingLeft||this.state.cancelSwipe?r.a.createElement("div",{className:Object(Z.a)(s.revealContent,s.right,(n={},Object(l.a)(n,s.grow,this.state.swipedLeft),Object(l.a)(n,s.shrink,this.state.cancelSwipe),n)),ref:this.rightRef},null===(i=this.props.swipeLeft)||void 0===i?void 0:i.content):r.a.createElement(r.a.Fragment,null))}}]),a}(r.a.Component),te=Object(D.a)(V)(ee);function ae(e){return z(e,(function(e){return e.name}),(function(e){return e.value}))}var ne=Object(L.a)({root:{display:"flex",position:"relative","&:hover $archive":{display:"block"},"&-exit":{overflowX:"hidden",transform:"translateX(0)"},"&-exit-active":{transform:"translateX(100%)",transition:"transform 0.5s"}},header:{overflowX:"hidden"},archive:{position:"absolute",top:10,right:10,display:"none",cursor:"pointer",zIndex:1},archiveSwipe:{backgroundColor:"green",height:"100%",width:"100%"}}),re=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={labels:[],mounted:!0},n}return Object(h.a)(a,[{key:"archive",value:function(e){var t=this;e.stopPropagation(),this.setState({mounted:!1},(function(){t.props.archiveMessage(t.props.message.id)}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.message,n=t.noOfMessages,i=t.isThread,s=t.classes,c=ae(a.payload.headers),o=c.Subject,l=c.From.replace(">","").split("<");l[0]=l[0].replace(/"|\\/g,"");var u=!a.labelIds.includes("UNREAD"),h=r.a.createRef();return r.a.createElement(te,{swipeRight:{action:function(){return e.props.archiveMessage(e.props.message.id)},content:r.a.createElement(J.a,{className:s.archiveSwipe})}},r.a.createElement(Q.a,{in:this.state.mounted,unmountOnExit:!0,timeout:500,classNames:s.root,nodeRef:h},r.a.createElement("div",{ref:h,className:s.root+" message "+(i?"threaded ":"")+(u?"read":"")},r.a.createElement(M.a,null,l[0][0]),r.a.createElement("div",{className:s.header},r.a.createElement("div",{title:l[1]},r.a.createElement("b",null,l[0]),n>1?n:""),r.a.createElement("div",null,r.a.createElement("b",null,"Subject:")," ",o),r.a.createElement("div",{title:a.snippet,className:"snippet"},a.snippet),r.a.createElement("div",{style:{display:"flex"}},0===this.state.labels.length?r.a.createElement(se,{id:"placeHolder",text:"..."}):r.a.createElement(r.a.Fragment,null),this.state.labels.map((function(e){var t,a;return r.a.createElement(se,{key:e.id,id:e.id,text:P(e.name),textColor:null===(t=e.color)||void 0===t?void 0:t.textColor,backgroundColor:null===(a=e.color)||void 0===a?void 0:a.backgroundColor})})))),r.a.createElement(J.a,{className:s.archive,onClick:this.archive.bind(this)}))))}},{key:"componentDidMount",value:function(){var e=this;_.getLabels(this.props.message.labelIds.filter((function(e){return!["UNREAD","INBOX"].includes(e)})),this.props.message.id,!1).then((function(t){e.setState({labels:t})}))}}]),a}(r.a.Component),ie=Object(D.a)(ne)(re);function se(e){var t=Object(X.a)({tagStyle:{color:e.textColor||"black",background:e.backgroundColor||"white",borderRadius:"0.25em",display:"inline-block",alignSelf:"center",marginRight:"5px",padding:"0 5px"},iconStyle:{marginRight:"5px"},important:{color:"gold"}})();switch(e.id){case"CATEGORY_PERSONAL":return r.a.createElement(q.a,{className:t.iconStyle});case"IMPORTANT":return r.a.createElement(K.a,{className:t.iconStyle+" "+t.important})}return r.a.createElement("div",{className:t.tagStyle},e.text)}var ce=a(154),oe=a(44),le=a(53),ue=new R(S);function he(e){var t="";return t=de(t="undefined"===typeof e.parts?e.body.data:function e(t){for(var a=0;a<=t.length;a++){if("undefined"!==typeof t[a].parts)return e(t[a].parts);if("text/html"===t[a].mimeType)return t[a].body.data}return""}(e.parts)),decodeURIComponent(escape(window.atob(t)))}function de(e){return e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"")}function pe(e){return fe.apply(this,arguments)}function fe(){return(fe=Object(I.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue.get(t.cid,t.request).then((function(e){return t.data=e.result.data,t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var me=function(){function e(t,a,n,r,i){Object(u.a)(this,e),this.id=void 0,this.filename=void 0,this.cid=void 0,this.mimeType=void 0,this.request=void 0,this.data=void 0,this.id=t,this.filename=a,this.cid=n,this.mimeType=r,this.request=i,this.data=null}return Object(h.a)(e,[{key:"setData",value:function(e){this.data=e}}]),e}(),ve=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).iframe=void 0,n.timeOut=void 0,n.state={body:he(e.message.payload)},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){for(var e=this,t=function e(t,a){var n={all:[],byCID:{}};if(!t)return n;var r,i=Object(le.a)(t);try{for(i.s();!(r=i.n()).done;){var s=r.value;if(s.filename&&s.filename.length>0){var c=s.body.attachmentId,o=window.gapi.client.gmail.users.messages.attachments.get({id:c,messageId:a,userId:"me"}),l=ae(s.headers)["Content-ID"];l&&(l=l.replace("<","").replace(">",""));var u=new me(c,s.filename,l,s.mimeType,o);n.all.push(u),l&&(n.byCID[l]=u)}else if("multipart/related"===s.mimeType){var h,d=e(s.parts,a);(h=n.all).push.apply(h,Object(oe.a)(d.all)),Object.assign(n.byCID,d.byCID)}}}catch(p){i.e(p)}finally{i.f()}return n}(this.props.message.payload.parts,this.props.message.id),a=this.state.body,n=0,r=Object.keys(t.byCID);n<r.length;n++){var i=r[n];a=a.split("cid:".concat(i)).join("".concat(m.a,"?").concat(i))}a=a.split("<head>").join('<head><link href="Mail.css" rel="stylesheet" type="text/css">'),this.setState({body:a});for(var s=0,c=Object.values(t.byCID);s<c.length;s++){pe(c[s]).then((function(t){e.setState({body:e.state.body.split("".concat(m.a,"?").concat(t.cid)).join("data:".concat(t.mimeType,";base64,").concat(de(t.data)))})}))}}},{key:"componentDidUpdate",value:function(){var e=this.iframe;e.contentDocument.getElementsByTagName("html")[0].innerHTML=this.state.body,this.timeOut=window.setTimeout((function(){e.contentWindow&&(e.height=e.contentWindow.document.body.scrollHeight+30)}),200)}},{key:"componentDidUnMount",value:function(){window.cancelTimeout(this.timeOut)}},{key:"setIframeRef",value:function(e){this.iframe=e}},{key:"render",value:function(){return r.a.createElement("iframe",{title:this.props.message.snippet,ref:this.setIframeRef.bind(this),width:"100%"})}}]),a}(n.Component),ge=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={open:!1},e}return Object(h.a)(a,[{key:"toggleOpen",value:function(){this.setState({open:!this.state.open})}},{key:"render",value:function(){var e=this.props,t=e.message,a=e.isThread,n=e.archiveMessage;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{onClick:this.toggleOpen.bind(this)},r.a.createElement(ie,{message:t,noOfMessages:1,isThread:a,archiveMessage:n})),r.a.createElement(ce.a,{in:this.state.open,mountOnEnter:!0,unmountOnExit:!0},r.a.createElement(ve,{message:t})))}}]),a}(r.a.Component),be=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).threadCache=void 0,n.state={messages:n.props.thread.messages||[]},n.threadCache=new R(k),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;0===this.state.messages.length&&_.getThread(this.props.thread.id).then((function(t){var a=t.result.messages;a&&e.setState({messages:a})}))}},{key:"archiveMessage",value:function(e){var t=this;_.archiveMessage(e).then((function(a){t.setState({messages:t.state.messages.filter((function(t){return t.id!==e}))})}))}},{key:"archiveThread",value:function(){this.props.archiveThread(this.props.thread.id)}},{key:"render",value:function(){var e=this,t=this.state.messages.length;if(0===t)return r.a.createElement("div",null,"'loading...'");var a=this.state.messages[t-1];return 1===t?r.a.createElement(ge,{message:a,archiveMessage:this.archiveThread.bind(this)}):r.a.createElement(N.a,{trigger:r.a.createElement(ie,{message:a,noOfMessages:t,archiveMessage:this.archiveThread.bind(this)})},this.state.messages.map((function(t){return r.a.createElement(ge,{key:t.id,message:t,isThread:!0,archiveMessage:e.archiveMessage.bind(e)})})))}}]),a}(r.a.Component);function we(e){return r.a.createElement(r.a.Fragment,null,e.threads.map((function(t){return r.a.createElement(be,{thread:t,key:t.id,archiveThread:e.archiveThread})})))}var ye=a(156),Oe=a(174),Ee=a(155),je=a(83),ke=a.n(je),Se=a(84),xe=a.n(Se),Ce=Object(L.a)({root:{"@media (hover: hover)":{"&:hover $archive":{display:"inline-block"}},"&-exit":{overflowX:"hidden",transform:"translateX(0)"},"&-exit-active":{transform:"translateX(100%)",transition:"transform 0.5s"}},archive:{display:"none",cursor:"pointer",zIndex:1},archiveSwipe:{backgroundColor:"green",height:"100%",width:"100%"}}),Ie=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n,r;Object(u.a)(this,a),r=t.call(this,e);var i={};(null===(n=e.label)||void 0===n?void 0:n.color)&&(i={color:e.label.color.textColor,backgroundColor:e.label.color.backgroundColor});var s="";return e.category?s=P(e.category):e.label&&(s=P(e.label.name)),r.state={name:s,unread:0,open:!1,threads:[],labelColors:i,mounted:!0},r}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e,t=this,a=["INBOX"];this.props.label?a.push(this.props.label.id):this.props.category&&(e=this.props.category),_.listThreads(this.state.name.replace(":","_"),e,a).then((function(e){var a=e.threads,n=e.resultSizeEstimate;t.props.label&&(n=Math.min(t.props.label.messagesUnread,n)),a?t.setState({threads:a,unread:n}):t.setState({unread:n})}))}},{key:"toggleOpen",value:function(){this.setState({open:!this.state.open})}},{key:"archiveThread",value:function(e){var t=this;_.archiveThread(e).then((function(a){t.setState({threads:t.state.threads.filter((function(t){return t.id!==e}))})}))}},{key:"archiveClicked",value:function(e){var t=this;e.stopPropagation(),this.archive((function(){return t.setState({mounted:!1})}))}},{key:"archive",value:function(e){_.archiveThreads(this.state.threads.map((function(e){return e.id}))).then((function(t){return e()}))}},{key:"onExited",value:function(){this.props.onArchived&&this.props.onArchived(this.props.label||this.props.category||"")}},{key:"render",value:function(){var e=this;if(0===this.state.unread)return"";var t=this.props.classes,a=r.a.createRef();return r.a.createElement(te,{swipeRight:{action:function(){return e.archive(e.onExited.bind(e))},content:r.a.createElement(J.a,{className:t.archiveSwipe})}},r.a.createElement(Q.a,{in:this.state.mounted,unmountOnExit:!0,timeout:500,classNames:t.root,onExited:this.onExited.bind(this),nodeRef:a},r.a.createElement("div",{ref:a,className:t.root},r.a.createElement(Oe.a,{style:this.state.labelColors,button:!0,onClick:this.toggleOpen.bind(this)},r.a.createElement(Ee.a,{primary:P(this.state.name),secondary:this.state.unread}),r.a.createElement(J.a,{className:t.archive,onClick:this.archiveClicked.bind(this)}),this.state.open?r.a.createElement(ke.a,null):r.a.createElement(xe.a,null)),r.a.createElement(ce.a,{style:{paddingLeft:"1em"},in:this.state.open,timeout:"auto",mountOnEnter:!0},r.a.createElement(we,{threads:this.state.threads,archiveThread:this.archiveThread.bind(this)})))))}}]),a}(r.a.Component),Re=Object(D.a)(Ce)(Ie),Te=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).labelCache=void 0,n.threadCache=void 0,n.state={settings:Object(v.get)(O)||y,threads:[],labels:[],categories:b},n.labelCache=new R(j),n.threadCache=new T(k),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.getLabels(),this.getThreads()}},{key:"getLabelFilter",value:function(){return Object.values(this.state.settings.bundleLabels).map((function(e){return e.name})).concat(g).map((function(e){return"NOT label:".concat(e)})).concat(this.state.categories.map((function(e){return"NOT ".concat(e)}))).join(" ")}},{key:"getThreads",value:function(){var e=this;_.listThreads("listThreads",this.getLabelFilter()).then((function(t){var a=t.threads||[];e.setState({threads:a})}))}},{key:"getLabels",value:function(){var e=this,t=Object.values(this.state.settings.bundleLabels).map((function(e){return e.id}));_.getLabels(t,"bundleLabels").then((function(t){return e.setState({labels:t})}))}},{key:"archiveThread",value:function(e){var t=this;_.archiveThread(e).then((function(a){t.setState({threads:t.state.threads.filter((function(t){return t.id!==e}))})}))}},{key:"categoryArchived",value:function(e){this.setState({categories:this.state.categories.filter((function(t){return e!==t}))})}},{key:"labelArchived",value:function(e){this.setState({labels:this.state.labels.filter((function(t){return t.id!==e.id}))})}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(ye.a,{className:Object(Z.a)(t.root)},this.state.categories.map((function(t){return r.a.createElement(Re,{key:t,category:t,onArchived:e.categoryArchived.bind(e)})})),this.state.labels.map((function(t){return r.a.createElement(Re,{key:t.id,label:t,onArchived:e.labelArchived.bind(e)})})),r.a.createElement(we,{threads:this.state.threads,archiveThread:this.archiveThread.bind(this)}))}}]),a}(r.a.Component),Ae=Object(D.a)((function(e){return{root:{flex:1,overflowY:"auto",overflowX:"hidden",backgroundColor:e.palette.background.paper}}}),{withTheme:!0})(Te),Ne=a(157),Le=a(85),Me=a.n(Le),De=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).gapi=void 0,n.state={isSignedIn:!1,messages:[],profileImage:null},e.onActivation("Inbox"),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){_.init(),_.onSignInStatusChanged(this.updateSignInStatus.bind(this))}},{key:"updateSignInStatus",value:function(e){this.setState({isSignedIn:e})}},{key:"render",value:function(){return r.a.createElement("div",{className:"gmail"},this.state.isSignedIn?r.a.createElement(Ae,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"GManuail"),r.a.createElement("img",{src:m.a,className:"App-logo",alt:"logo"}),r.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:_.authorize.bind(_)},r.a.createElement(Me.a,null),"\xa0\xa0Authorize with Gmail Account")))}}]),a}(r.a.Component),Xe=a(165),Be=a(92),Pe=a(166),ze=a(61),Ue=a(13),Fe=(a(118),a(163)),We=a(158),He=a(159),_e=a(162),Ge=a(170),qe=a(161),Ye=Object(X.a)((function(e){return{root:{margin:"auto",overflow:"auto"},cardHeader:{padding:e.spacing(1,2)},list:{width:300,height:"60vh",minHeight:200,backgroundColor:e.palette.background.paper,overflow:"auto"},button:{margin:e.spacing(.5,0)}}}));function Je(e,t){return e.filter((function(e){return-1===t.indexOf(e)}))}function $e(e,t){return e.filter((function(e){return-1!==t.indexOf(e)}))}function Ke(e){var t=Ye(),a=r.a.useState([]),n=Object(c.a)(a,2),i=n[0],s=n[1],o=r.a.useState([]),l=Object(c.a)(o,2),u=l[0],h=l[1],d=r.a.useState([]),p=Object(c.a)(d,2),f=p[0],m=p[1],v=e.labelProvider,g=e.selectionChanged;r.a.useEffect((function(){h(e.left)}),[e.left]),r.a.useEffect((function(){m(e.right)}),[e.right]);var b=$e(i,u),w=$e(i,f),y=function(e){return function(){var t=i.indexOf(e),a=Object(oe.a)(i);-1===t?a.push(e):a.splice(t,1),s(a)}},O=function(e){return $e(i,e).length},E=function(e){return function(){var t,a;O(e)===e.length?s(Je(i,e)):s((t=i,a=e,[].concat(Object(oe.a)(t),Object(oe.a)(Je(a,t)))))}},j=function(e,a){return r.a.createElement(We.a,null,r.a.createElement(He.a,{className:t.cardHeader,avatar:r.a.createElement(Ge.a,{onClick:E(a),checked:O(a)===a.length&&0!==a.length,indeterminate:O(a)!==a.length&&0!==O(a),disabled:0===a.length,inputProps:{"aria-label":"all items selected"}}),title:e,subheader:"".concat(O(a),"/").concat(a.length," selected")}),r.a.createElement(qe.a,null),r.a.createElement(ye.a,{className:t.list,dense:!0,component:"div",role:"list"},a.map((function(e){var t=v(e),a="transfer-list-all-item-".concat(t,"-label");return r.a.createElement(Oe.a,{key:t,role:"listitem",button:!0,onClick:y(e)},r.a.createElement(_e.a,null,r.a.createElement(Ge.a,{checked:-1!==i.indexOf(e),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":a}})),r.a.createElement(Ee.a,{id:a,primary:"".concat(t)}))})),r.a.createElement(Oe.a,null)))};return r.a.createElement(Fe.a,{container:!0,spacing:2,justify:"center",alignItems:"center",className:t.root},r.a.createElement(Fe.a,{item:!0},j("Choices",u)),r.a.createElement(Fe.a,{item:!0},r.a.createElement(Fe.a,{container:!0,direction:"column",alignItems:"center"},r.a.createElement(Ne.a,{variant:"outlined",size:"small",className:t.button,onClick:function(){var e=b;m(f.concat(e)),h(Je(u,b)),s(Je(i,b)),g(e,[])},disabled:0===b.length,"aria-label":"move selected right"},">"),r.a.createElement(Ne.a,{variant:"outlined",size:"small",className:t.button,onClick:function(){var e=w;h(u.concat(w)),m(Je(f,w)),s(Je(i,w)),g([],e)},disabled:0===w.length,"aria-label":"move selected left"},"<"))),r.a.createElement(Fe.a,{item:!0},j("Chosen",f)))}var Qe=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).cache=void 0,n.state=Object(v.get)(O)||y,n.cache=new R(j),e.onActivation("Settings"),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;_.onSignInStatusChanged((function(t){t&&_.listAllLabels().then((function(e){return e.filter((function(e){return!w.includes(e.id)})).filter((function(e){return!b.includes(e.id.replace("_",":").toLowerCase())})).sort((function(e,t){return P(e.name)>P(t.name)?1:-1}))})).then((function(t){var a=z(t,(function(e){return e.id}),(function(e){return e})),n={};for(var r in a)e.state.bundleLabels[r]||(n[r]=a[r]);e.setState({labels:n})}))}))}},{key:"componentWillUnmount",value:function(){Object(v.set)("settings",this.state)}},{key:"selectionChanged",value:function(e,t){if(0!==e.length||0!==t.length){var a,n=Object.assign({},this.state.labels),r=Object.assign({},this.state.bundleLabels),i=Object(le.a)(e);try{for(i.s();!(a=i.n()).done;){var s=a.value;r[s.id]=s,delete n[s.id]}}catch(u){i.e(u)}finally{i.f()}var c,o=Object(le.a)(t);try{for(o.s();!(c=o.n()).done;){var l=c.value;delete r[l.id],n[l.id]=l}}catch(u){o.e(u)}finally{o.f()}this.setState({labels:n,bundleLabels:r})}}},{key:"render",value:function(){return r.a.createElement("div",{className:"settings"},r.a.createElement("h2",null,"Settings"),r.a.createElement(Ke,{left:Object.values(this.state.labels),right:Object.values(this.state.bundleLabels),labelProvider:function(e){return P(e.name)},selectionChanged:this.selectionChanged.bind(this)}))}}]),a}(r.a.Component),Ze=a(167),Ve=a(168),et=a(35),tt=a(88),at=a.n(tt),nt=a(160),rt=a(93),it=a(32),st=a(169),ct=a(164),ot=a(87),lt=a.n(ot),ut=a(86),ht=a.n(ut),dt=Object(X.a)((function(e){return Object(L.a)({root:{display:"flex"},hide:{display:"none"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(l.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:0},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(o.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)}})}));function pt(e){var t,a,i=dt(),s=Object(it.a)(),o=r.a.useState(!1),u=Object(c.a)(o,2),h=u[0],d=u[1],p=e.handleDrawerClose,f=Object(rt.a)(e,["handleDrawerClose"]);return Object(n.useEffect)((function(){d(e.open)}),[e.open]),r.a.createElement("div",{className:i.root},r.a.createElement(ct.a,null),r.a.createElement(st.a,{variant:"permanent",className:Object(Z.a)(i.drawer,(t={},Object(l.a)(t,i.drawerOpen,h),Object(l.a)(t,i.drawerClose,!h),t)),classes:{paper:Object(Z.a)((a={},Object(l.a)(a,i.drawerOpen,h),Object(l.a)(a,i.drawerClose,!h),a))}},r.a.createElement("div",{className:i.toolbar},r.a.createElement(nt.a,{onClick:p},"rtl"===s.direction?r.a.createElement(ht.a,null):r.a.createElement(lt.a,null))),r.a.createElement(qe.a,null),r.a.createElement(ye.a,f)))}var ft=a(90),mt=a.n(ft),vt=a(91),gt=a.n(vt),bt=a(89),wt=a.n(bt),yt=Object(X.a)((function(e){var t;return Object(L.a)({root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},content:(t={marginTop:"56px",height:"calc(100vh - 56px)"},Object(l.a)(t,e.breakpoints.up("xs")+"and (orientation: landscape)",{marginTop:"48px",height:"calc(100vh - 48px)"}),Object(l.a)(t,"width","100vw"),Object(l.a)(t,"marginLeft",0),Object(l.a)(t,e.breakpoints.up("sm"),{width:"calc(100vw - ".concat(e.spacing(10),"px)"),marginLeft:e.spacing(10),marginTop:"64px",height:"calc(100vh - 64px)"}),Object(l.a)(t,"backgroundColor","#111"),Object(l.a)(t,"display","flex"),Object(l.a)(t,"flexDirection","column"),Object(l.a)(t,"color","white"),Object(l.a)(t,"transition",e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})),t),shroud:Object(l.a)({display:"none"},e.breakpoints.down("xs"),{display:"block",position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",cursor:"pointer",zIndex:1}),appBarShift:Object(l.a)({},e.breakpoints.up("sm"),{marginLeft:240,width:"calc(100vw - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})}),menuButton:{marginRight:36},hide:Object(l.a)({},e.breakpoints.up("sm"),{display:"none"}),toolbar:Object(o.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),buttons:{marginLeft:"auto"}})}));var Ot=function(){var e=Object(Xe.a)("(prefers-color-scheme: dark)"),t=yt(),a=r.a.useState(!1),n=Object(c.a)(a,2),i=n[0],s=n[1],o=r.a.useState(!1),u=Object(c.a)(o,2),h=u[0],d=u[1],p=r.a.useState(""),f=Object(c.a)(p,2),m=f[0],v=f[1],g=r.a.useState(""),b=Object(c.a)(g,2),w=b[0],y=b[1];r.a.useEffect((function(){_.onSignInStatusChanged((function(e){if(d(e),e&&e){var t=_.getCurrentUserProfile();v(t.getImageUrl())}}))}),[]);var O=function(){s(!1)},E=r.a.useMemo((function(){return Object(Be.a)({palette:{type:e?"dark":"light"}})}),[e]);return r.a.createElement(Pe.a,{theme:E},r.a.createElement(Ze.a,{position:"fixed",className:Object(Z.a)(t.appBar,Object(l.a)({},t.appBarShift,i))},r.a.createElement(Ve.a,{className:Object(Z.a)(t.toolbar)},r.a.createElement(nt.a,{color:"inherit","aria-label":"open drawer",onClick:function(){s(!i)},edge:"start",className:Object(Z.a)(t.menuButton,Object(l.a)({},t.hide,i))},r.a.createElement(at.a,null)),r.a.createElement(et.a,{variant:"h6",noWrap:!0},w),r.a.createElement("div",{className:t.buttons},h?r.a.createElement("div",{style:{display:"inline-flex"}},r.a.createElement(M.a,{src:m}),r.a.createElement(nt.a,{onClick:_.signOut.bind(_)},r.a.createElement(wt.a,null))):""))),r.a.createElement(ze.a,null,r.a.createElement("div",{className:Object(Z.a)(Object(l.a)({},t.shroud,i)),onClick:O}),r.a.createElement(pt,{open:i,handleDrawerClose:O},r.a.createElement(ze.b,{className:"nostyle",to:"/"},r.a.createElement(Oe.a,null,r.a.createElement(_e.a,null,r.a.createElement(mt.a,null)),r.a.createElement(Ee.a,null,"Inbox"))),r.a.createElement(ze.b,{className:"nostyle",to:"/settings"},r.a.createElement(Oe.a,null,r.a.createElement(_e.a,null,r.a.createElement(gt.a,null)),r.a.createElement(Ee.a,null,"Settings")))),r.a.createElement("div",{className:Object(Z.a)(t.content,Object(l.a)({},t.appBarShift,i))+" App"},r.a.createElement(Ue.c,null,r.a.createElement(Ue.a,{path:"/settings"},r.a.createElement(Qe,{onActivation:y})),r.a.createElement(Ue.a,{path:"/"},r.a.createElement(De,{onActivation:y}))))))},Et=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function jt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ot,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/BoxedIn",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/BoxedIn","/service-worker.js");Et?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):jt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):jt(t,e)}))}}()},49:function(e,t,a){e.exports=a.p+"static/media/logo.ee7cd8ed.svg"},64:function(e){e.exports=JSON.parse('{"web":{"client_id":"502644802338-f4okt21j8mf34458v9depg0qmladaslf.apps.googleusercontent.com","api_key":"AIzaSyDX1vHnztDA0hQo2MGQAuxBtiBZ0xvuMqg"}}')}},[[103,1,2]]]);
//# sourceMappingURL=main.0da6d410.chunk.js.map